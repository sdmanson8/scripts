[Unit]
Description = MergerFS Service
After=rclone-vfs.service
RequiresMountsFor=/mnt/local
RequiresMountsFor=/mnt/remote

[Service]
Type=forking
KillMode=none
ExecStart=~/bin/mergerfs \
    -o use_ino,func.getattr=newest,category.action=all \
    -o category.create=ff,cache.files=auto-full,threads=8 \
    /mnt/local:/mnt/remote /mnt/mergerfs

StandardOutput=file:~/scripts/mergerfs_mount.log
ExecStop=/bin/fusermount -uz /mnt/mergerfs
Restart=on-failure

[Install]
WantedBy=default.target
